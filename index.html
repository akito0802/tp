<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>スケール指板ビューア</title>
  <link rel="stylesheet" href="style.css" />
<style id='force-blue-melon'>

/* === FORCE OVERRIDE: Blue theme + Melon Soda select === */
:root{
  --blue-1:#e5f4fb; --blue-2:#d0ecf7; --blue-3:#98cfe3; --blue-accent:#048db7;
  --bg:var(--blue-1); --surface:#ffffff; --panel:var(--blue-2); --panel-2:var(--blue-3);
  --text:#0b1220; --muted:#3c5363; --accent:var(--blue-accent); --outline:#98cfe3;
  --root:#ff8f3a; --note:#36b4d6; --tension:#7abfe0; --fret:#b5d7e5; --string:#8fbfd4; --row:#ffffff;
}
html,body{ background: var(--bg) !important; }
header{ background: var(--panel) !important; border-bottom: 1px solid var(--outline) !important; }
.controls,.tension-panel{ background: var(--panel) !important; border:1px solid var(--outline) !important; border-radius:12px !important; }
#fretboard{ background: var(--row) !important; border:1px solid var(--outline) !important; }
.table{ background: var(--row) !important; border:1px solid var(--outline) !important; }
.table th{ background: var(--panel) !important; color: var(--muted) !important; }
.badge{ background: #fff !important; border:1px solid var(--outline) !important; }
.badge-root{ background: #fee2c5 !important; color:#7a3e00 !important; }
.badge-scale{ background: #dbeafe !important; color:#1e40af !important; }
.badge-tension{ background: #ede9fe !important; color:#5b21b6 !important; }

/* Melon Soda select */
/* Melon Soda select with Gold border */
select {
  background-color:#d4f9e1 !important;
  border:2px solid gold !important;
  color:#2d6a4f !important;
  padding:8px 12px !important;
  border-radius:16px !important;
  font-size:15px !important;
  font-family:"Hiragino Maru Gothic ProN","Yu Gothic",sans-serif !important;
  box-shadow: inset 0 1px 4px rgba(255,255,255,0.6),
              0 3px 6px rgba(0,0,0,0.08) !important;
  appearance:none !important;
  background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg width='12' height='8' viewBox='0 0 12 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='gold' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E") !important;
  background-repeat:no-repeat !important;
  background-position:right 10px center !important;
  background-size:12px 8px !important;
  transition: background-color .2s, box-shadow .2s !important;
}
select:focus {
  outline:none !important;
  background-color:#c2f5d7 !important;
  box-shadow: inset 0 1px 6px rgba(255,255,255,0.7),
              0 4px 10px rgba(218,165,32,0.3) !important;
}

</style>
</head>
<body>
  <header>
    <h1>スケール指板ビューア</h1>
    <div class="controls">
      <label>キー
        <select id="keySelect"></select>
      </label>
      <label>ジャンル
        <select id="genreSelect">
          <option value="" selected disabled>読み込み中...</option>
        </select>
      </label>
      <label>スケール
        <select id="scaleSelect">
          <option value="" selected disabled>ジャンルを選択</option>
        </select>
      </label>
      <label>表示
        <select id="displayMode">
          <option value="dots">● ドット</option>
          <option value="notes">♪ 音名</option>
          <option value="degrees">度数</option>
        </select>
      </label>
      <button id="downloadBtn">画像を保存（PNG）</button>
      <button id="theoryBtn">説明</button>
    </div>

    <div class="tension-panel">
      <div class="tension-title">テンション追加：</div>
      <div class="tension-list">
        <label><input type="checkbox" class="tension" value="b9"> b9</label>
        <label><input type="checkbox" class="tension" value="9"> 9</label>
        <label><input type="checkbox" class="tension" value="#9"> #9</label>
        <label><input type="checkbox" class="tension" value="11"> 11</label>
        <label><input type="checkbox" class="tension" value="#11"> #11</label>
        <label><input type="checkbox" class="tension" value="b13"> b13</label>
        <label><input type="checkbox" class="tension" value="13"> 13</label>
      </div>
      <div class="tension-actions">
        <button id="tensionClearBtn" title="すべて外す">クリア</button>
      </div>
    </div>
  </header>

  <main>
    <div id="fretboardWrapper">
      <svg id="fretboard" xmlns="http://www.w3.org/2000/svg" aria-label="ギター指板"></svg>
      <div class="hint">※指板タップで全画面（もう一度タップで閉じる）</div>
    </div>

    <section id="tableSection">
      <h2>構成音（1オクターブ）</h2>
      <div id="scaleTable"></div>
    </section>
  </main>

  <footer>
    <p>標準チューニング E A D G B E / 12フレット / スマホ対応</p>
  </footer>

  <!-- Minimal fullscreen overlay -->
  <div id="zoomOverlay" hidden>
    <div id="zoomStage"></div>
    <div id="zoomInfoLabel" aria-live="polite"></div>
  </div>

  <noscript>このページはJavaScriptを使用します。ブラウザ設定で有効にしてください。</noscript>
  <script src="script.js?v=16"></script>

  <!-- Theory Modal -->
  <div id="theoryModal" hidden>
    <div class="theory-dialog" role="dialog" aria-modal="true" aria-labelledby="theoryTitle">
      <div class="theory-header">
        <h3 id="theoryTitle">スケールの説明</h3>
        <button id="theoryClose" aria-label="閉じる">×</button>
      </div>
      <div id="theoryBody" class="theory-body"></div>
    </div>
  </div>

</body>
</html>
