<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>スケール指板ビューア</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>スケール指板ビューア</h1>
    <div class="controls">
      <label>キー
        <select id="keySelect"></select>
      </label>
      <label>ジャンル
        <select id="genreSelect">
          <option value="" selected disabled>読み込み中...</option>
        </select>
      </label>
      <label>スケール
        <select id="scaleSelect">
          <option value="" selected disabled>ジャンルを選択</option>
        </select>
      </label>
      <label>表示
        <select id="displayMode">
          <option value="dots">● ドット</option>
          <option value="notes">♪ 音名</option>
          <option value="degrees">度数</option>
        </select>
      </label>
      <button id="downloadBtn">画像を保存（PNG）</button>
      <button id="theoryBtn">説明</button>
    </div>

    <div class="tension-panel">
      <div class="tension-title">テンション追加：</div>
      <div class="tension-list">
        <label><input type="checkbox" class="tension" value="b9"> b9</label>
        <label><input type="checkbox" class="tension" value="9"> 9</label>
        <label><input type="checkbox" class="tension" value="#9"> #9</label>
        <label><input type="checkbox" class="tension" value="11"> 11</label>
        <label><input type="checkbox" class="tension" value="#11"> #11</label>
        <label><input type="checkbox" class="tension" value="b13"> b13</label>
        <label><input type="checkbox" class="tension" value="13"> 13</label>
      </div>
      <div class="tension-actions">
        <button id="tensionClearBtn" title="すべて外す">クリア</button>
      </div>
    </div>
  </header>

  <main>
    <div id="fretboardWrapper">
      <svg id="fretboard" xmlns="http://www.w3.org/2000/svg" aria-label="ギター指板"></svg>
      <div class="hint">※指板タップで全画面（もう一度タップで閉じる）</div>
    </div>

    <section id="tableSection">
      <h2>構成音（1オクターブ）</h2>
      <div id="scaleTable"></div>
    </section>
  </main>

  <footer>
    <p>標準チューニング E A D G B E / 12フレット / スマホ対応</p>
  </footer>

  <!-- Minimal fullscreen overlay -->
  <div id="zoomOverlay" hidden>
    <div id="zoomStage"></div>
    <div id="zoomInfoLabel" aria-live="polite"></div>
  </div>

  <noscript>このページはJavaScriptを使用します。ブラウザ設定で有効にしてください。</noscript>
  <script src="script.js?v=16"></script>

  <!-- Theory Modal -->
  <div id="theoryModal" hidden>
    <div class="theory-dialog" role="dialog" aria-modal="true" aria-labelledby="theoryTitle">
      <div class="theory-header">
        <h3 id="theoryTitle">スケールの説明</h3>
        <button id="theoryClose" aria-label="閉じる">×</button>
      </div>
      <div id="theoryBody" class="theory-body"></div>
    </div>
  </div>

</body>
</html>
